(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6361d5bc"],{4877:function(e,t,r){},"65bb":function(e,t,r){"use strict";r("4877")},dc3f:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[r("el-form",{ref:"loginForm",staticClass:"login-form ele-bg-white",attrs:{model:e.form,rules:e.rules,size:"large"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSubmit(t)}}},[r("h4",[e._v("后台管理系统")]),r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入登录账号","prefix-icon":"el-icon-user",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入登录密码","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"captcha"}},[r("div",{staticClass:"login-input-group"},[r("el-input",{attrs:{placeholder:"请输入验证码","prefix-icon":"el-icon-_vercode"},model:{value:e.form.captcha,callback:function(t){e.$set(e.form,"captcha",t)},expression:"form.captcha"}}),e.captcha?r("img",{staticClass:"login-captcha",attrs:{src:e.captcha,alt:""},on:{click:e.changeCaptcha}}):e._e()],1)]),r("div",{staticClass:"el-form-item"},[r("el-checkbox",{model:{value:e.form.remember,callback:function(t){e.$set(e.form,"remember",t)},expression:"form.remember"}},[e._v("记住密码 ")])],1),r("div",{staticClass:"el-form-item"},[r("el-button",{staticClass:"login-btn",attrs:{loading:e.loading,type:"primary",size:"large"},on:{click:e.doSubmit}},[e._v(" "+e._s(e.loading?"登录中":"登录")+" ")])],1)],1)],1)},o=[],s={name:"Login",data:function(){return{direction:1,loading:!1,form:{username:"",password:"",captcha:"",remember:!0,key:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},captcha:""}},mounted:function(){this.$store.state.user.token&&this.$router.push(this.$route.query.from||"/"),this.changeCaptcha()},methods:{doSubmit:function(){var e=this;this.$refs["loginForm"].validate((function(t){if(!t)return!1;e.loading=!0;var r=new FormData;for(var a in e.form)r.append(a,e.form[a]);console.log(e.form),e.$http.post("/login/login",e.form).then((function(t){e.loading=!1,0===t.data.code?(e.$message({type:"success",message:"登录成功"}),e.$store.dispatch("user/setToken","Bearer "+t.data.data.access_token).then((function(){e.$router.push(e.$route.query.from||"/").catch((function(){}))}))):e.$message.error(t.data.msg)})).catch((function(t){console.log(t),e.loading=!1,e.$message.error("用户名或密码不正确")}))}))},changeCaptcha:function(){var e=this;this.$http.get("/login/captcha").then((function(t){0===t.data.code?(e.captcha=t.data.data.captcha,e.form.key=t.data.data.key,e.form.captcha=e.text):e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(t.message)}))}}},n=s,c=(r("65bb"),r("2877")),i=Object(c["a"])(n,a,o,!1,null,"34d19395",null);t["default"]=i.exports}}]);